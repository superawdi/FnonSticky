"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"function"==typeof define&&define.amd?define([],function(){return t(e)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=t(e):e.FnonSticky=t(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:void 0,function(e){if(void 0===e&&void 0===e.document)return!1;var t={identifier:null,onClose:null,onLoaded:null,saveOnRefresh:!1,showTime:!0,time:null,animate:!0,zIndex:null},n=function(e,t,n){sessionStorage.setItem(e,JSON.stringify({text:t,settings:n}))},o=function(e){var t=_objectSpread({},e);return delete t.onClose,delete t.onLoaded,t},i=function(i,c){var r=!1,s=c?_objectSpread(_objectSpread({},t),c):_objectSpread({},t),a=document.createElement("div");if(void 0!==s.id&&null!==s.id)a.setAttribute("data-id",s.id);else if(s.saveOnRefresh){var d="fnonsticky"+(s.identifier?s.identifier:"")+Math.random().toString(16).slice(2);a.setAttribute("data-id",d)}var l="".concat(s.fontSize?"--fnon-sticky-font-size:".concat(s.fontSize,";"):"");s.initWidth&&(l+="".concat(s.initWidth?"--fnon-sticky-min-width:".concat(s.initWidth,";"):"")),s.background&&(l+="".concat(s.background?"background:".concat(s.background,";"):"")),s.color&&(l+="".concat(s.color?"--fnon-sticky-text-color:".concat(s.color,";"):"")),!0!==s.animate&&(l+="animation:none;"),s.zIndex&&(l+="z-index:".concat(s.zIndex,";")),a.classList.add("fnon-sticky"),a.setAttribute("style",l),a.innerHTML='<div class="fnon-sticky-content">\n            <div class="note">\n                <div class="note-content">'.concat(i,"</div>\n                ").concat(s.showTime?'<span class="time">'.concat(s.time?s.time:(new Date).toLocaleTimeString(),"</span>"):"","\n            </div>\n            ").concat(s.hidePin?"":'<i class="pin"></i>','\n            <span class="fnon-sticky-btn resize-btn">&#10070;</span>\n            <span class="fnon-sticky-btn close-btn">&#x2612;</span>\n        </div>'),s.style&&a.setAttribute("style",s.style),document.body.append(a),s.onLoaded&&"function"==typeof s.onLoaded&&s.onLoaded(a);var u=a.querySelector(".note"),f=u.querySelector(".note-content");!function(t,n,o){var i=0,c=0,r=0,s=0;t.onmousedown=function(t){n()||((t=t||e.event).preventDefault(),r=t.clientX,s=t.clientY,document.onmouseup=l,document.onmousemove=d)};var a=document.body.style.overflow,d=function(n){"hidden"!==a&&(document.body.style.overflow="hidden"),(n=n||e.event).preventDefault(),i=r-n.clientX,c=s-n.clientY,r=n.clientX,s=n.clientY,t.style.top=t.offsetTop-c+"px",t.style.left=t.offsetLeft-i+"px"},l=function(){document.onmouseup=null,document.onmousemove=null}}(a,function(){return r}),f.addEventListener("click",function(e){if(e.stopPropagation(),!f.firstElementChild||"textarea"!==f.firstElementChild.tagName){r=!0;var t=document.createElement("textarea");t.addEventListener("click",function(e){e.stopPropagation()});var i=f.lastWidth?f.lastWidth:u.clientWidth;t.style="height:".concat(f.clientHeight,"px;width:").concat(i,"px"),new ResizeObserver(function(){r&&(u.style.width=t.clientWidth+5+"px",u.style.minWidth=t.clientWidth+5+"px")}).observe(t),t.value=f.textContent.trim(),f.innerHTML="",t.oldValue=t.value,f.append(t),t.focus(),t.addEventListener("focusout",function(){var e=t.value;s.saveOnRefresh&&t.oldValue!=t.value&&n(a.dataset.id,e,o(_objectSpread(_objectSpread({},s),{},{style:a.getAttribute("style")}))),r=!1,f.lastWidth=t.clientWidth,f.innerHTML=e})}}),void 0===s.id&&s.saveOnRefresh&&n(a.dataset.id,i,o(_objectSpread(_objectSpread({},s),{},{style:a.getAttribute("style")}))),a.querySelector("span.resize-btn").addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),a.classList.toggle("minimized")}),a.querySelector("span.close-btn").addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),sessionStorage.removeItem(a.dataset.id),s.onClose&&"function"==typeof s.onClose&&s.onClose(a),a.remove()})};return document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){Object.keys(sessionStorage).filter(function(e){return e.startsWith("fnonsticky"+(t.identifier?t.identifier:""))}).forEach(function(e){try{var t=JSON.parse(sessionStorage.getItem(e));null!==t.text&&null!==t.settings&&(t.settings.id=e,i(t.text,t.settings))}catch(e){console.log(e)}})},1500)}),{DefaultSettings:t,Create:i}});